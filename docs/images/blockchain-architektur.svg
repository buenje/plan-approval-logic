<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 750" font-family="'Segoe UI', Arial, sans-serif">
  <defs>
    <!-- Gradients - unified blue-gray palette -->
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f8fafc"/>
      <stop offset="100%" style="stop-color:#e2e8f0"/>
    </linearGradient>
    <linearGradient id="ebaGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#334155"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    <linearGradient id="vorhabenGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#475569"/>
      <stop offset="100%" style="stop-color:#334155"/>
    </linearGradient>
    <linearGradient id="chainGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#64748b"/>
      <stop offset="50%" style="stop-color:#475569"/>
      <stop offset="100%" style="stop-color:#334155"/>
    </linearGradient>
    
    <!-- Shadow filter -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="3" stdDeviation="4" flood-opacity="0.15"/>
    </filter>
    <filter id="softShadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="1" dy="2" stdDeviation="2" flood-opacity="0.1"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="950" height="750" fill="url(#bgGrad)"/>
  
  <!-- Title -->
  <text x="475" y="38" text-anchor="middle" font-size="24" font-weight="600" fill="#1e293b">Konsortial-Blockchain für Planfeststellungsverfahren</text>
  <text x="475" y="60" text-anchor="middle" font-size="14" fill="#64748b">Permissioned Network – Architekturübersicht</text>
  
  <!-- Blockchain Layer (Center) - enlarged -->
  <rect x="100" y="310" width="750" height="130" rx="10" fill="url(#chainGrad)" filter="url(#shadow)" opacity="0.95"/>
  <text x="475" y="340" text-anchor="middle" font-size="16" font-weight="600" fill="#ffffff">PERMISSIONED BLOCKCHAIN NETWORK</text>
  
  <!-- Blockchain blocks - larger -->
  <g transform="translate(120, 355)">
    <!-- Block 1 -->
    <rect x="0" y="0" width="110" height="70" rx="5" fill="#f8fafc" stroke="#475569" stroke-width="2"/>
    <text x="55" y="18" text-anchor="middle" font-size="11" font-weight="600" fill="#334155">Block N-2</text>
    <text x="55" y="34" text-anchor="middle" font-size="8" fill="#64748b">Hash: 7f3a...</text>
    <text x="55" y="48" text-anchor="middle" font-size="8" fill="#475569">Prev: 0000...</text>
    <text x="55" y="62" text-anchor="middle" font-size="7" fill="#64748b">Doc-Hash: a1b2...</text>
    
    <!-- Chain link symbol -->
    <g transform="translate(115, 28)">
      <ellipse cx="10" cy="0" rx="8" ry="10" fill="none" stroke="#475569" stroke-width="2"/>
      <ellipse cx="22" cy="0" rx="8" ry="10" fill="none" stroke="#475569" stroke-width="2"/>
    </g>
    
    <!-- Block 2 -->
    <rect x="150" y="0" width="110" height="70" rx="5" fill="#f8fafc" stroke="#475569" stroke-width="2"/>
    <text x="205" y="18" text-anchor="middle" font-size="11" font-weight="600" fill="#334155">Block N-1</text>
    <text x="205" y="34" text-anchor="middle" font-size="8" fill="#64748b">Hash: 2c8b...</text>
    <text x="205" y="48" text-anchor="middle" font-size="8" fill="#475569">Prev: 7f3a...</text>
    <text x="205" y="62" text-anchor="middle" font-size="7" fill="#64748b">Doc-Hash: c3d4...</text>
    
    <!-- Chain link symbol -->
    <g transform="translate(265, 28)">
      <ellipse cx="10" cy="0" rx="8" ry="10" fill="none" stroke="#475569" stroke-width="2"/>
      <ellipse cx="22" cy="0" rx="8" ry="10" fill="none" stroke="#475569" stroke-width="2"/>
    </g>
    
    <!-- Block 3 -->
    <rect x="300" y="0" width="110" height="70" rx="5" fill="#f8fafc" stroke="#475569" stroke-width="2"/>
    <text x="355" y="18" text-anchor="middle" font-size="11" font-weight="600" fill="#334155">Block N</text>
    <text x="355" y="34" text-anchor="middle" font-size="8" fill="#64748b">Hash: 9d1e...</text>
    <text x="355" y="48" text-anchor="middle" font-size="8" fill="#475569">Prev: 2c8b...</text>
    <text x="355" y="62" text-anchor="middle" font-size="7" fill="#64748b">Doc-Hash: e5f6...</text>
    
    <!-- Chain link symbol -->
    <g transform="translate(415, 28)">
      <ellipse cx="10" cy="0" rx="8" ry="10" fill="none" stroke="#475569" stroke-width="2"/>
      <ellipse cx="22" cy="0" rx="8" ry="10" fill="none" stroke="#475569" stroke-width="2"/>
    </g>
    
    <!-- Block 4 (current/pending) -->
    <rect x="450" y="0" width="110" height="70" rx="5" fill="#e2e8f0" stroke="#334155" stroke-width="2.5"/>
    <text x="505" y="18" text-anchor="middle" font-size="11" font-weight="600" fill="#334155">Block N+1</text>
    <text x="505" y="34" text-anchor="middle" font-size="8" fill="#64748b">Hash: pending</text>
    <text x="505" y="48" text-anchor="middle" font-size="8" fill="#475569">Prev: 9d1e...</text>
    <text x="505" y="62" text-anchor="middle" font-size="7" fill="#64748b">Doc-Hash: ????</text>
  </g>
  
  <!-- Smart Contract Box (inside blockchain layer) -->
  <g transform="translate(720, 345)">
    <rect x="0" y="0" width="115" height="90" rx="5" fill="#f8fafc" stroke="#475569" stroke-width="2"/>
    <text x="57" y="16" text-anchor="middle" font-size="10" font-weight="600" fill="#334155">SMART</text>
    <text x="57" y="28" text-anchor="middle" font-size="10" font-weight="600" fill="#334155">CONTRACTS</text>
    <line x1="10" y1="34" x2="105" y2="34" stroke="#64748b" stroke-width="1"/>
    <text x="12" y="48" font-size="8" fill="#475569">● HashRegistry</text>
    <text x="12" y="60" font-size="8" fill="#475569">● WorkflowGate</text>
    <text x="12" y="72" font-size="8" fill="#475569">● Merkle-Root</text>
    <text x="12" y="84" font-size="8" fill="#475569">● Timestamps</text>
  </g>
  
  <!-- Infrastructure note above Blockchain -->
  <text x="475" y="300" text-anchor="middle" font-size="11" font-weight="600" fill="#64748b">Validator-Betrieb: Rechenzentren des Bundes</text>
  
  <!-- EBA Node (Top Left) - enlarged -->
  <g transform="translate(100, 90)">
    <rect x="0" y="0" width="300" height="170" rx="12" fill="url(#ebaGrad)" filter="url(#shadow)"/>
    <rect x="12" y="12" width="276" height="36" rx="6" fill="rgba(255,255,255,0.1)"/>
    <text x="150" y="36" text-anchor="middle" font-size="15" font-weight="600" fill="#fff">EISENBAHN-BUNDESAMT</text>
    <text x="150" y="54" text-anchor="middle" font-size="10" fill="#94a3b8">Verfahrensführende Behörde</text>
    
    <!-- On-Chain section -->
    <text x="20" y="78" font-size="10" font-weight="600" fill="#94a3b8">ON-CHAIN:</text>
    <text x="20" y="95" font-size="9" fill="#cbd5e1">● Validator Node</text>
    <text x="20" y="110" font-size="9" fill="#cbd5e1">● Phasensteuerung</text>
    <text x="20" y="125" font-size="9" fill="#cbd5e1">● Fristüberwachung</text>
    <text x="20" y="140" font-size="9" fill="#cbd5e1">● Merkle-Root</text>
    
    <!-- Off-Chain section -->
    <text x="160" y="78" font-size="10" font-weight="600" fill="#94a3b8">OFF-CHAIN:</text>
    <text x="160" y="95" font-size="9" fill="#cbd5e1">● Einwendungen</text>
    <text x="160" y="110" font-size="9" fill="#cbd5e1">● Personenbez. Daten</text>
    <text x="160" y="125" font-size="9" fill="#cbd5e1">● Anhörungsverfahren</text>
    <text x="160" y="140" font-size="9" fill="#cbd5e1">● Planunterlagen</text>
    
    <!-- Divider line -->
    <line x1="150" y1="70" x2="150" y2="150" stroke="#475569" stroke-width="1" stroke-dasharray="3,3"/>
  </g>
  
  <!-- Connection EBA to Blockchain -->
  <line x1="250" y1="260" x2="250" y2="310" stroke="#334155" stroke-width="3" stroke-dasharray="8,4"/>
  <polygon points="244,305 250,315 256,305" fill="#334155"/>
  
  <!-- Landesbehörde (Top Right) - enlarged -->
  <g transform="translate(550, 90)">
    <rect x="0" y="0" width="200" height="170" rx="12" fill="#f1f5f9" stroke="#64748b" stroke-width="2" filter="url(#shadow)"/>
    <rect x="12" y="12" width="176" height="32" rx="6" fill="#e2e8f0"/>
    <text x="100" y="34" text-anchor="middle" font-size="13" font-weight="600" fill="#334155">LANDESBEHÖRDE</text>
    <text x="100" y="50" text-anchor="middle" font-size="9" fill="#64748b">z.B. Regierungspräsidium</text>
    
    <!-- On-Chain section -->
    <text x="15" y="72" font-size="10" font-weight="600" fill="#475569">ON-CHAIN:</text>
    <text x="15" y="89" font-size="9" fill="#64748b">● Light Node (Read)</text>
    <text x="15" y="104" font-size="9" fill="#64748b">● Status-Einsicht</text>
    
    <!-- Off-Chain section -->
    <text x="15" y="126" font-size="10" font-weight="600" fill="#475569">OFF-CHAIN:</text>
    <text x="15" y="143" font-size="9" fill="#64748b">● Stellungnahme-Upload</text>
    <text x="15" y="158" font-size="9" fill="#64748b">● Landesrechtl. Belange</text>
  </g>
  
  <!-- Connection Landesbehörde to Blockchain -->
  <line x1="650" y1="260" x2="650" y2="310" stroke="#64748b" stroke-width="2" stroke-dasharray="6,3"/>
  <polygon points="644,305 650,315 656,305" fill="#64748b"/>
  

  
  <!-- Vorhabenträger (Bottom Left) - enlarged -->
  <g transform="translate(80, 485)">
    <rect x="0" y="0" width="200" height="175" rx="10" fill="url(#vorhabenGrad)" filter="url(#shadow)"/>
    <text x="100" y="22" text-anchor="middle" font-size="13" font-weight="600" fill="#fff">VORHABENTRÄGER</text>
    <text x="100" y="38" text-anchor="middle" font-size="9" fill="#cbd5e1">z.B. DB InfraGO AG</text>
    
    <!-- On-Chain section -->
    <text x="15" y="58" font-size="10" font-weight="600" fill="#94a3b8">ON-CHAIN:</text>
    <text x="15" y="75" font-size="9" fill="#e2e8f0">● Light Node (Read)</text>
    <text x="15" y="90" font-size="9" fill="#e2e8f0">● Status-Abfrage</text>
    <text x="15" y="105" font-size="9" fill="#e2e8f0">● Merkle-Root</text>
    
    <!-- Off-Chain section -->
    <text x="15" y="128" font-size="10" font-weight="600" fill="#94a3b8">OFF-CHAIN:</text>
    <text x="15" y="145" font-size="9" fill="#e2e8f0">● Planunterlagen</text>
    <text x="15" y="160" font-size="9" fill="#e2e8f0">● Ergänz. Unterlagen</text>
  </g>
  
  <!-- Connection Vorhabenträger to Blockchain -->
  <line x1="180" y1="485" x2="180" y2="440" stroke="#475569" stroke-width="2.5" stroke-dasharray="6,3"/>
  <polygon points="174,445 180,435 186,445" fill="#475569"/>
  
  <!-- Off-Chain document flow: Vorhabenträger to EBA -->
  <path d="M 80 545 L 45 545 L 45 180 L 100 180" stroke="#64748b" stroke-width="2" fill="none"/>
  <polygon points="95,175 105,180 95,185" fill="#64748b"/>
  
  <!-- Combined Token and Hash flow: Smart Contract to Vorhabenträger -->
  <path d="M 720 425 L 720 480 L 280 480 L 280 485" stroke="#334155" stroke-width="2.5" fill="none" stroke-dasharray="6,3"/>
  <polygon points="275,480 280,490 285,480" fill="#334155"/>
  <!-- Combined box - centered between VT and TöB - HIGHLIGHTED -->
  <g transform="translate(320, 453)">
    <rect x="0" y="0" width="180" height="50" rx="4" fill="#16a34a" stroke="#15803d" stroke-width="2"/>
    <text x="90" y="16" text-anchor="middle" font-size="10" font-weight="600" fill="#ffffff">BESCHLUSS</text>
    <text x="90" y="30" text-anchor="middle" font-size="8" fill="#bbf7d0">Hash + Timestamp</text>
    <text x="90" y="44" text-anchor="middle" font-size="8" fill="#bbf7d0">Planunterlagen: Merkle-Root</text>
  </g>
  
  <!-- Planungsbüro (Bottom Center) -->
  <g transform="translate(330, 530)">
    <rect x="0" y="0" width="160" height="100" rx="10" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2" filter="url(#softShadow)"/>
    <text x="80" y="22" text-anchor="middle" font-size="11" font-weight="600" fill="#475569">PLANUNGSBÜRO</text>
    <text x="80" y="38" text-anchor="middle" font-size="9" fill="#64748b">Externer Dienstleister</text>
    
    <!-- Off-Chain only -->
    <text x="15" y="58" font-size="10" font-weight="600" fill="#475569">OFF-CHAIN:</text>
    <text x="15" y="75" font-size="9" fill="#64748b">● Kein Blockchain-Zugang</text>
    <text x="15" y="90" font-size="9" fill="#64748b">● Zulieferung an VHT</text>
  </g>
  
  <!-- Arrow from Planungsbüro to Vorhabenträger -->
  <line x1="330" y1="580" x2="290" y2="580" stroke="#94a3b8" stroke-width="1.5"/>
  <polygon points="295,576 285,580 295,584" fill="#94a3b8"/>
  
  <!-- TöB (Bottom Right) - enlarged -->
  <g transform="translate(560, 500)">
    <rect x="0" y="0" width="200" height="160" rx="10" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2" filter="url(#softShadow)"/>
    <text x="100" y="22" text-anchor="middle" font-size="13" font-weight="600" fill="#475569">TÖB / BETROFFENE</text>
    <text x="100" y="38" text-anchor="middle" font-size="8" fill="#64748b">Kommunen, Verbände, Private</text>
    
    <!-- On-Chain section -->
    <text x="15" y="58" font-size="10" font-weight="600" fill="#475569">ON-CHAIN:</text>
    <text x="15" y="75" font-size="9" fill="#64748b">● Light Node (Read)</text>
    <text x="15" y="90" font-size="9" fill="#64748b">● Status-Einsicht</text>
    
    <!-- Off-Chain section -->
    <text x="15" y="112" font-size="10" font-weight="600" fill="#475569">OFF-CHAIN:</text>
    <text x="15" y="129" font-size="9" fill="#64748b">● Stellungnahmen</text>
    <text x="15" y="144" font-size="9" fill="#64748b">● Einwendungen</text>
  </g>
  
  <!-- Connection TöB to Blockchain -->
  <line x1="660" y1="500" x2="660" y2="440" stroke="#64748b" stroke-width="2" stroke-dasharray="6,3"/>
  <polygon points="654,445 660,435 666,445" fill="#64748b"/>
  

  
  <!-- Legend - enlarged and improved -->
  <g transform="translate(30, 680)">
    <rect x="0" y="0" width="890" height="60" rx="8" fill="#fff" stroke="#e2e8f0" stroke-width="1" filter="url(#softShadow)"/>
    <text x="20" y="22" font-size="11" font-weight="600" fill="#475569">LEGENDE:</text>
    
    <!-- Validator -->
    <rect x="100" y="10" width="16" height="16" rx="3" fill="url(#ebaGrad)"/>
    <text x="122" y="23" font-size="10" fill="#64748b">Validator Node (schreibt Blöcke)</text>
    
    <!-- Light Node -->
    <rect x="295" y="10" width="16" height="16" rx="3" fill="#f1f5f9" stroke="#94a3b8" stroke-width="1"/>
    <text x="317" y="23" font-size="10" fill="#64748b">Light Node (liest Status)</text>
    
    <!-- On-Chain Connection -->
    <line x1="470" y1="18" x2="505" y2="18" stroke="#475569" stroke-width="2" stroke-dasharray="6,3"/>
    <text x="515" y="23" font-size="10" fill="#64748b">On-Chain</text>
    
    <!-- Off-Chain Connection -->
    <line x1="590" y1="18" x2="625" y2="18" stroke="#94a3b8" stroke-width="2"/>
    <text x="635" y="23" font-size="10" fill="#64748b">Off-Chain</text>
    
    <text x="20" y="48" font-size="9" fill="#94a3b8">Konsensalgorithmus: PoA (Proof of Authority) · EVM-kompatibel · Private/Permissioned Network</text>
  </g>
</svg>
